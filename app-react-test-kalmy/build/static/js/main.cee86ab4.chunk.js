(this["webpackJsonpapp-test-kalmy"]=this["webpackJsonpapp-test-kalmy"]||[]).push([[0],{162:function(e,a,t){},303:function(e,a,t){e.exports=t(493)},308:function(e,a,t){},493:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),o=t(23),l=t.n(o),s=(t(308),t(187)),c=t(125),i=t(126),u=t(43),d=t(155),m=t(150),h=(t(162),t(199),t(514)),g=t(512),p=t(509),f=t(513),b=t(494),v=t(15),y=t(71),E=(t(200),function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).state={user:"",password:"",loading:!1,error:!1},n.onSubmit=n.onSubmit.bind(Object(u.a)(n)),n.onChange=n.onChange.bind(Object(u.a)(n)),n}return Object(i.a)(t,[{key:"onSubmit",value:function(){var e=this,a=this.state,t=a.user,n=a.password;t&&n?(console.log("Peticion login - usuario: ".concat(t," contrase\xf1a: ").concat(n)),this.setState({loading:!0}),fetch("http://localhost:55657/api/login/authenticate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Username:t,Password:n})}).then((function(e){return e.json()})).then((function(e){var a=JSON.parse(e);if(console.log("respuesta: ",a),200===a.StatusCode)return console.log("Usuario autorizado"),localStorage.setItem("tokenjwt",a.Data),r.a.createElement(v.a,{to:"/"});y.b.info(a.Message,{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})})).finally((function(){return e.setState({loading:!1})}))):(y.b.info("Asegurate de llenar todos los campos",{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),this.setState({error:!0}))}},{key:"onChange",value:function(e,a){var t,n=a.value,r=a.name;this.setState((t={},Object(s.a)(t,r,n),Object(s.a)(t,"error",!1),t))}},{key:"render",value:function(){var e=this.state,a=e.user,t=e.password,n=e.error;return localStorage.getItem("tokenjwt")?r.a.createElement(v.a,{to:"/"}):r.a.createElement("div",{className:"container-login"},r.a.createElement(h.a,null,r.a.createElement("h2",null,"Inicia sesi\xf3n"),r.a.createElement(g.a,{onSubmit:this.onSubmit},r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"Usuario"),r.a.createElement(p.a,{error:n,name:"user",value:a,placeholder:"Usuario",onChange:this.onChange})),r.a.createElement(g.a.Field,null,r.a.createElement("label",null,"Contrase\xf1a"),r.a.createElement(p.a,{error:n,name:"password",type:"password",value:t,placeholder:"Contrase\xf1a",onChange:this.onChange})),n?r.a.createElement(f.a,{warning:!0,header:"Faltan datos por llenar",list:["Asegurate de haber llenado todos los campos para ingresar"]}):null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(b.a,{color:"blue",type:"submit"},"Ingresar")))))}}]),t}(r.a.Component)),C=t(510),S=t(511),k=t(46),j=[{key:"1",text:"Brand",value:"Brand"},{key:"2",text:"Model",value:"Model"},{key:"3",text:"Type",value:"Type"}],O=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).state={agrupados:[],DataChart:[],columnas:[],loading:!1},n.onChange=n.onChange.bind(Object(u.a)(n)),n.generarReporte=n.generarReporte.bind(Object(u.a)(n)),n.cerrarSesion=n.cerrarSesion.bind(Object(u.a)(n)),n}return Object(i.a)(t,[{key:"cerrarSesion",value:function(){localStorage.removeItem("tokenjwt"),this.forceUpdate()}},{key:"generarDataChart",value:function(e){var a=[],t=e.map((function(e){var t={name:e.First};return e.Group?e.Group.forEach((function(e){t[e.Second]=e.Count,a.find((function(a){return a.name===e.Second}))||a.push({name:e.Second,color:"#".concat(Math.floor(16777215*Math.random()).toString(16))})})):(t.Cantidad=e.Count,a.find((function(e){return"Cantidad"===e.name}))||a.push({name:"Cantidad",color:"#".concat(Math.floor(16777215*Math.random()).toString(16))})),t}));this.setState({DataChart:t,columnas:a})}},{key:"generarReporte",value:function(){var e=this,a=this.state.agrupados,t=localStorage.getItem("tokenjwt");a.length&&t&&fetch("http://localhost:55657/api/rents/getcarrents",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({a1:a[0],a2:a[1]?a[1]:""})}).then((function(e){return e.json()})).then((function(a){var t=JSON.parse(a);e.generarDataChart(t.Data)}))}},{key:"onChange",value:function(e,a){var t=a.value;t.length<3?this.setState({agrupados:t}):y.b.info("Solo puedes elegir dos parametros de agrupaci\xf3n",{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}},{key:"render",value:function(){var e=this.state,a=e.agrupados,t=e.DataChart,n=e.columnas;return localStorage.getItem("tokenjwt")?r.a.createElement(C.a,{className:"container-dashboard"},r.a.createElement(h.a,{className:"segmento-dashboard"},r.a.createElement("div",{style:{display:"flex",width:"100%"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("h3",{style:{whiteSpace:"nowrap"}},"Generar gr\xe1fica de reporte de rentas de vehiculos")),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"}},r.a.createElement(b.a,{color:"red",onClick:this.cerrarSesion},"Cerrar sesi\xf3n"))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(S.a,{value:a,onChange:this.onChange,placeholder:"Agrupados",multiple:!0,selection:!0,options:j}),r.a.createElement(b.a,{color:"blue",onClick:this.generarReporte},"Generar gr\xe1fica")),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},t.length?r.a.createElement(k.e,{width:"85%",height:"75%"},r.a.createElement(k.b,{data:t,margin:{top:20,right:30,left:20,bottom:5}},r.a.createElement(k.c,{strokeDasharray:"3 3"}),r.a.createElement(k.g,{dataKey:"name"}),r.a.createElement(k.h,null),r.a.createElement(k.f,null),r.a.createElement(k.d,null),n.map((function(e){return r.a.createElement(k.a,{key:e.name,dataKey:e.name,stackId:"a",fill:e.color})})))):r.a.createElement("h3",null,"A\xfan no hay datos para mostrar")))):r.a.createElement(v.a,{to:"/Login"})}}]),t}(r.a.Component),w=t(124);var x=function(){return r.a.createElement(w.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/"},r.a.createElement(O,null)),r.a.createElement(v.b,{path:"/Login"},r.a.createElement(E,null))),r.a.createElement(y.a,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[303,1,2]]]);
//# sourceMappingURL=main.cee86ab4.chunk.js.map